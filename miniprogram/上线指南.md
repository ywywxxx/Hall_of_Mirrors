# 微信小程序上线指南

## 📋 准备工作

### 1. 注册微信小程序账号

1. 访问 [微信公众平台](https://mp.weixin.qq.com/)
2. 点击"立即注册"，选择"小程序"
3. 填写邮箱、密码等信息完成注册
4. 登录后，在"设置" -> "基本设置"中获取你的 **AppID**

### 2. 下载微信开发者工具

1. 访问 [微信开发者工具下载页面](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 下载并安装对应系统的版本（Windows/Mac/Linux）

## 🚀 开发步骤

### 1. 配置项目

1. 打开微信开发者工具
2. 选择"导入项目"
3. 项目目录选择：`/Users/ywxiao/Desktop/mirrors/miniprogram`
4. AppID 填写：
   - 如果有 AppID：填写你的 AppID
   - 如果没有：选择"测试号"（仅用于开发测试）

### 2. 配置 AppID（可选）

编辑 `miniprogram/project.config.json`，将 `"appid": "your-appid"` 替换为你的 AppID：

```json
{
  "appid": "wxcd941141dfbc0c9e"
}
```

### 3. 编译运行

1. 在微信开发者工具中点击"编译"按钮
2. 在模拟器中预览效果
3. 可以点击"预览"生成二维码，用微信扫码在手机上测试

## 📱 功能测试

测试以下功能是否正常：

- [ ] 首页显示所有难度选项
- [ ] 点击难度进入游戏页面
- [ ] 点击格子可以放置/切换镜子
- [ ] 长按格子可以标记"无镜子"
- [ ] 显示答案功能正常
- [ ] 新关卡生成正常
- [ ] 通关检测正常
- [ ] 返回按钮正常

## 🎨 样式调整（可选）

如果需要适配不同屏幕尺寸，可以调整：

- `miniprogram/pages/game/game.wxss` 中的 `cellSize`（格子大小）
- `miniprogram/pages/game/game.ts` 中的 `cellSize` 数据

建议：
- 小屏幕（iPhone SE）：`cellSize: 40`
- 中等屏幕（iPhone 12）：`cellSize: 50`
- 大屏幕（iPhone Pro Max）：`cellSize: 60`

## 📤 上传代码

1. 在微信开发者工具中点击"上传"按钮
2. 填写版本号和项目备注
3. 点击"上传"
4. 上传成功后，代码会保存到微信服务器

## ✅ 提交审核

1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入"版本管理"
3. 找到刚才上传的开发版本
4. 点击"提交审核"
5. 填写审核信息：
   - **服务类目**：选择"游戏" -> "益智游戏"
   - **标签**：填写"益智游戏"、"拼图"等
   - **功能页面**：选择首页路径 `/pages/index/index`
   - **审核备注**：可以填写游戏说明

## 🎉 发布上线

1. 等待审核通过（通常 1-7 个工作日）
2. 审核通过后，在"版本管理"中点击"发布"
3. 确认发布后，小程序即可在微信中搜索使用

## 📝 注意事项

1. **首次提交审核**需要完善小程序信息：
   - 小程序名称
   - 小程序简介
   - 小程序头像
   - 服务类目

2. **代码包大小限制**：
   - 主包不超过 2MB
   - 整个小程序不超过 20MB
   - 当前项目应该远小于限制

3. **功能要求**：
   - 不能有外部链接（除非配置业务域名）
   - 不能有违规内容
   - 需要提供用户协议和隐私政策（如果收集用户信息）

4. **性能优化**：
   - 如果游戏运行较慢，可以考虑：
     - 减少最大网格尺寸（当前支持到 11×11）
     - 优化光路计算逻辑
     - 使用 canvas 绘制光路（当前版本未实现）

## 🔧 常见问题

### Q: 编译报错怎么办？
A: 检查 TypeScript 语法，确保所有文件格式正确。可以在微信开发者工具中查看具体错误信息。

### Q: 预览时显示空白？
A: 检查 `app.json` 中的页面路径是否正确，确保所有页面文件都存在。

### Q: 审核被拒怎么办？
A: 查看审核反馈，根据提示修改后重新提交。常见原因：
- 服务类目选择不当
- 缺少必要的功能说明
- 存在违规内容

### Q: 如何更新版本？
A: 修改代码后，重新上传新版本，提交审核，审核通过后发布即可。

## 📞 技术支持

如果遇到问题，可以：
1. 查看 [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
2. 在微信开发者社区提问
3. 查看项目 README.md 文件

---

祝你的小程序顺利上线！🎉
